<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TuemCamp</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", sans-serif;
      background: #f5f6fa;
      overflow: hidden;
      height: 100vh;
    }

    nav {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      padding: 10px 50px;
      border-bottom: 1px solid #ddd;
      background: white;
      z-index: 100;
      position: relative;
    }

    .logo {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 5px;
      font-weight: bold;
      font-size: 1.5rem;
    }

    .main {
      color: #e74c3c;
    }

    .sub {
      color: #333;
    }

    .nav-links ul {
      display: flex;
      gap: 40px;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s ease;
    }

    .nav-links a:hover {
      color: #e74c3c;
    }

    header {
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #333;
      padding: 1rem 0;
      background: white;
      border-bottom: 1px solid #eee;
    }

    #map-container {
      position: fixed;
      width: 100vw;
      height: calc(100vh - 120px);
      background: #f5f6fa;
      overflow: hidden;
      top: 120px;
      left: 0;
      cursor: grab;
    }

    #map-container.grabbing {
      cursor: grabbing;
    }

    #map-wrapper {
      transform-origin: center center;
      transition: transform 0.05s ease-out;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    object {
      width: 700px;
      height: 700px;
    }

    #province-tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 14px;
      pointer-events: none;
      z-index: 1000;
      display: none;
      white-space: nowrap;
    }

    #info-panel {
      position: fixed;
      right: 20px;
      top: 140px;
      width: 350px;
      max-height: calc(100vh - 160px);
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      padding: 1.5rem;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    }

    #info-panel.show {
      display: block;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    #info-panel h3 {
      margin-top: 0;
      color: #333;
      font-size: 1.5rem;
      border-bottom: 2px solid #e74c3c;
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
    }

    .competition {
      display: flex;
      align-items: center;
      gap: 1rem;
      border-bottom: 1px solid #eee;
      padding: 0.75rem 0;
      transition: background 0.2s ease;
    }

    .competition:hover {
      background: #f9f9f9;
      border-radius: 8px;
      padding-left: 0.5rem;
    }

    .competition img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
    }

    .no-competitions {
      text-align: center;
      padding: 3rem 2rem;
      color: #888;
      background: #f9f9f9;
      border-radius: 12px;
      margin: 1rem 0;
    }

    .no-competitions p {
      margin: 0.5rem 0;
      line-height: 1.6;
    }

    .zoom-controls {
      position: fixed;
      left: 20px;
      bottom: 30px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
    }

    .zoom-btn {
      width: 45px;
      height: 45px;
      border: none;
      background: #e74c3c;
      color: white;
      font-size: 22px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .zoom-btn:hover {
      background: #c0392b;
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
    }

    .zoom-btn:active {
      transform: scale(0.95);
    }

    .zoom-level {
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      color: #666;
      padding: 5px 0;
    }

    /* Province styling */
    .province-hover-style {
      fill: #e8f4f8 !important;
      stroke: #000 !important;
      stroke-width: 1px !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
    }

    .province-hover-style:hover {
      fill: #d4f1f9 !important;
      stroke: #e74c3c !important;
      stroke-width: 3px !important;
      filter: drop-shadow(0 4px 8px rgba(231, 76, 60, 0.4)) !important;
    }

    .instruction {
      position: fixed;
      left: 20px;
      bottom: 240px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      font-size: 13px;
      color: #666;
      max-width: 200px;
      z-index: 1000;
    }

    .instruction strong {
      color: #e74c3c;
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>

<body>
  <nav>
    <div class="logo">
      <div class="main">Tuem</div>
      <div class="sub">Camp</div>
    </div>
    <div class="nav-links">
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Region</a></li>
        <li><a href="#">University</a></li>
      </ul>
    </div>
  </nav>

  <header id="province-name">เลือกจังหวัดบนแผนที่ที่ต้องการทราบการแข่งขัน/ค่าย</header>

  <div id="map-container">
    <div id="map-wrapper">
      <object id="thailand-map" type="image/svg+xml" data="Thailand.svg"></object>
    </div>
    <div id="province-tooltip"></div>
  </div>

  <div id="info-panel">
    <h3 id="sidebar-province-name">ชื่อจังหวัด</h3>
    <div id="sidebar-competition-list"></div>
  </div>

  <div class="instruction">
    <strong>วิธีใช้งาน:</strong>
    • กด Ctrl + เลื่อนลูกกล้อง เพื่อซูม<br>
    • ลากเมาส์เพื่อเลื่อนแผนที่<br>
    • คลิกจังหวัดเพื่อดูรายละเอียด
  </div>

  <div class="zoom-controls">
    <button class="zoom-btn" id="zoom-in" title="ซูมเข้า">+</button>
    <div class="zoom-level" id="zoom-level">100%</div>
    <button class="zoom-btn" id="zoom-out" title="ซูมออก">−</button>
    <button class="zoom-btn" id="zoom-reset" style="font-size: 18px;" title="รีเซ็ต">⟲</button>
  </div>

  <script>
    const header = document.getElementById("province-name");
    const tooltip = document.getElementById("province-tooltip");
    const mapObject = document.getElementById("thailand-map");
    const mapContainer = document.getElementById("map-container");
    const mapWrapper = document.getElementById("map-wrapper");
    const infoPanel = document.getElementById("info-panel");
    const sidebarProvinceName = document.getElementById("sidebar-province-name");
    const sidebarCompetitionList = document.getElementById("sidebar-competition-list");
    const zoomInBtn = document.getElementById("zoom-in");
    const zoomOutBtn = document.getElementById("zoom-out");
    const zoomResetBtn = document.getElementById("zoom-reset");
    const zoomLevelDisplay = document.getElementById("zoom-level");

    // Zoom and Pan variables
    let scale = 1;
    let translateX = 0;
    let translateY = 0;
    let isDragging = false;
    let startX = 0;
    let startY = 0;

    const competitionsData = {
      "bangkok": [
        { name: "Bangkok Marathon", date: "15 ธ.ค. 2025", img: "https://picsum.photos/100?1" },
        { name: "Thailand Game Show", date: "20 ธ.ค. 2025", img: "https://picsum.photos/100?2" }
      ],
      "chiang_mai": [
        { name: "Chiang Mai Flower Festival", date: "25 ธ.ค. 2025", img: "https://picsum.photos/100?3" },
        { name: "Lanna Cultural Competition", date: "30 ธ.ค. 2025", img: "https://picsum.photos/100?4" }
      ],
      "chiang_rai": [
        { name: "Golden Triangle Marathon", date: "5 ม.ค. 2026", img: "https://picsum.photos/100?5" },
        { name: "White Temple Art Contest", date: "10 ม.ค. 2026", img: "https://picsum.photos/100?6" }
      ],
      "Phuket": [
        { name: "Phuket Triathlon", date: "15 ม.ค. 2026", img: "https://picsum.photos/100?5" },
        { name: "Phuket Food Festival", date: "20 ม.ค. 2026", img: "https://picsum.photos/100?6" },
        { name: "Andaman Sea Festival", date: "20 ม.ค. 2026", img: "https://picsum.photos/100?8" }
      ],
      "Krabi": [
        { name: "Krabi Rock Climbing Championship", date: "25 ม.ค. 2026", img: "https://picsum.photos/100?9" }
      ],
      "kanchanaburi": [
        { name: "Bridge Over River Kwai Festival", date: "30 ม.ค. 2026", img: "https://picsum.photos/100?10" }
      ],
      "chonburi": [
        { name: "Pattaya Music Festival", date: "5 ก.พ. 2026", img: "https://picsum.photos/100?11" },
        { name: "Songkran Water Festival", date: "10 ก.พ. 2026", img: "https://picsum.photos/100?12" }
      ],
      "Songkhla": [
        { name: "Hat Yai International Marathon", date: "15 ก.พ. 2026", img: "https://picsum.photos/100?13" }
      ],
      "sukhothai": [
        { name: "Sukhothai Historical Park Festival", date: "20 ก.พ. 2026", img: "https://picsum.photos/100?14" }
      ],
      "Pattani": [
        { name: "Pattani Cultural Festival", date: "25 ม.ค. 2026", img: "https://picsum.photos/100?7" }
      ],
      "phitsanulok": [
        { name: "Buddha Chinarat Festival", date: "25 ก.พ. 2026", img: "https://picsum.photos/100?15" }
      ]
    };

    const provinceNamesTH = {
      "amnat_charoen": "อำนาจเจริญ",
      "Ang_Thong": "อ่างทอง",
      "bangkok": "กรุงเทพมหานคร",
      "bueng_kan": "บึงกาฬ",
      "buriram": "บุรีรัมย์",
      "chachoengsao": "ฉะเชิงเทรา",
      "chai_nat": "ชัยนาท",
      "chaiyaphum": "ชัยภูมิ",
      "chanthaburi": "จันทบุรี",
      "chiang_mai": "เชียงใหม่",
      "chiang_rai": "เชียงราย",
      "chonburi": "ชลบุรี",
      "Chumphon": "ชุมพร",
      "kalasin": "กาฬสินธุ์",
      "kamphaeng_phet": "กำแพงเพชร",
      "Kanchanaburi": "กาญจนบุรี",
      "khon_kaen": "ขอนแก่น",
      "Krabi": "กระบี่",
      "lampang": "ลำปาง",
      "lamphun": "ลำพูน",
      "loei": "เลย",
      "lopburi": "ลพบุรี",
      "mae_hong_son": "แม่ฮ่องสอน",
      "maha_sarakham": "มหาสารคาม",
      "mukdahan": "มุกดาหาร",
      "nakhon_nayok": "นครนายก",
      "nakhon_pathom": "นครปฐม",
      "nakhon_phanom": "นครพนม",
      "nakhon_ratchasima": "นครราชสีมา",
      "nakhon_sawan": "นครสวรรค์",
      "Nakhon_Si_Thammarat": "นครศรีธรรมราช",
      "nan": "น่าน",
      "Narathiwat": "นราธิวาส",
      "nong_bua_lamphu": "หนองบัวลำภู",
      "nong_khai": "หนองคาย",
      "nonthaburi": "นนทบุรี",
      "Pattani": "ปัตตานี",
      "pathum_thani": "ปทุมธานี",
      "phra_nakhon_si_ayutthaya": "พระนครศรีอยุธยา",
      "Phang_Nga": "พังงา",
      "Phatthalung": "พัทลุง",
      "phayao": "พะเยา",
      "phetchabun": "เพชรบูรณ์",
      "phetchaburi": "เพชรบุรี",
      "phichit": "พิจิตร",
      "phitsanulok": "พิษณุโลก",
      "phrae": "แพร่",
      "Phuket": "ภูเก็ต",
      "prachinburi": "ปราจีนบุรี",
      "Prachuap_Khiri_Khan": "ประจวบคีรีขันธ์",
      "Ranong": "ระนอง",
      "ratchaburi": "ราชบุรี",
      "rayong": "ระยอง",
      "roi_et": "ร้อยเอ็ด",
      "sa_kaeo": "สระแก้ว",
      "sakon_nakhon": "สกลนคร",
      "Samut_Prakan": "สมุทรปราการ",
      "Samut_Sakhon": "สมุทรสาคร",
      "Samut_Songkhram": "สมุทรสงคราม",
      "saraburi": "สระบุรี",
      "Satun": "สตูล",
      "sing_buri": "สิงห์บุรี",
      "sisaket": "ศรีสะเกษ",
      "Songkhla": "สงขลา",
      "sukhothai": "สุโขทัย",
      "suphan_buri": "สุพรรณบุรี",
      "Surat_Thani": "สุราษฎร์ธานี",
      "surin": "สุรินทร์",
      "tak": "ตาก",
      "Trang": "ตรัง",
      "trat": "ตราด",
      "ubon_ratchathani": "อุบลราชธานี",
      "udon_thani": "อุดรธานี",
      "uthai_thani": "อุทัยธานี",
      "uttaradit": "อุตรดิตถ์",
      "Yala": "ยะลา",
      "yasothon": "ยโสธร"
    };

    function updateTransform() {
      mapWrapper.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
      zoomLevelDisplay.textContent = Math.round(scale * 100) + '%';
    }

    function zoom(delta, clientX, clientY) {
      const oldScale = scale;
      const zoomSpeed = 0.15;

      if (delta > 0) {
        scale = Math.min(scale + zoomSpeed, 4); // Max zoom 400%
      } else {
        scale = Math.max(scale - zoomSpeed, 0.5); // Min zoom 50%
      }

      // Zoom towards mouse position
      if (clientX !== undefined && clientY !== undefined) {
        const rect = mapContainer.getBoundingClientRect();
        const x = clientX - rect.left - rect.width / 2;
        const y = clientY - rect.top - rect.height / 2;

        translateX = translateX - x * (scale - oldScale) / oldScale;
        translateY = translateY - y * (scale - oldScale) / oldScale;
      }

      updateTransform();
    }

    // Zoom with Ctrl + Mouse Wheel
    mapContainer.addEventListener('wheel', (e) => {
      if (e.ctrlKey || e.metaKey) {
        e.preventDefault();
        zoom(e.deltaY > 0 ? -1 : 1, e.clientX, e.clientY);
      }
    }, { passive: false });

    // Pan with mouse drag
    mapContainer.addEventListener('mousedown', (e) => {
      // Only start dragging if not clicking on a province
      if (e.target === mapContainer || e.target === mapWrapper || e.target.tagName === 'OBJECT') {
        isDragging = true;
        startX = e.clientX - translateX;
        startY = e.clientY - translateY;
        mapContainer.classList.add('grabbing');
      }
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        translateX = e.clientX - startX;
        translateY = e.clientY - startY;
        updateTransform();
      }
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      mapContainer.classList.remove('grabbing');
    });

    // Zoom buttons
    zoomInBtn.addEventListener('click', () => zoom(1));
    zoomOutBtn.addEventListener('click', () => zoom(-1));
    zoomResetBtn.addEventListener('click', () => {
      scale = 1;
      translateX = 0;
      translateY = 0;
      updateTransform();
    });

    // Map interaction
    mapObject.addEventListener("load", () => {
      const svgDoc = mapObject.contentDocument;
      const allProvinces = svgDoc.querySelectorAll("path[id], g[id]");
      const validProvinceIds = Object.keys(provinceNamesTH);

      allProvinces.forEach(prov => {
        if (validProvinceIds.includes(prov.id)) {
          // Apply province styling
          prov.style.fill = "#e8f4f8";
          prov.style.stroke = "#000";
          prov.style.strokeWidth = "1px";
          prov.style.cursor = "pointer";
          prov.style.transition = "all 0.3s ease";
          prov.classList.add("province-hover-style");

          prov.addEventListener("mouseenter", (e) => {
            const provinceName = provinceNamesTH[prov.id];
            tooltip.textContent = provinceName;
            tooltip.style.display = "block";
            header.textContent = provinceName;

            prov.style.fill = "#d4f1f9";
            prov.style.stroke = "#e74c3c";
            prov.style.strokeWidth = "3px";
            prov.style.filter = "drop-shadow(0 4px 8px rgba(231, 76, 60, 0.4))";
          });

          prov.addEventListener("mousemove", (e) => {
            tooltip.style.left = (e.clientX + 15) + "px";
            tooltip.style.top = (e.clientY + 15) + "px";
          });

          prov.addEventListener("mouseleave", () => {
            tooltip.style.display = "none";
            if (!infoPanel.classList.contains("show")) {
              header.textContent = "เลือกจังหวัดบนแผนที่ที่ต้องการทราบการแข่งขัน/ค่าย";
            }

            prov.style.fill = "#e8f4f8";
            prov.style.stroke = "#000";
            prov.style.strokeWidth = "1px";
            prov.style.filter = "none";
          });

          prov.addEventListener("click", (e) => {
            e.stopPropagation();
            isDragging = false; // Prevent drag when clicking province
            
            const provinceName = provinceNamesTH[prov.id];
            header.textContent = provinceName;
            sidebarProvinceName.textContent = provinceName;

            const data = competitionsData[prov.id];
            if (data && data.length > 0) {
              sidebarCompetitionList.innerHTML = data.map(item => `
                <div class="competition">
                  <img src="${item.img}" alt="${item.name}">
                  <div>
                    <div><strong>${item.name}</strong></div>
                    <div style="color: #666; font-size: 0.9rem;">${item.date}</div>
                  </div>
                </div>
              `).join("");
            } else {
              sidebarCompetitionList.innerHTML = `
                <div class="no-competitions">
                  <div style="font-size: 48px; margin-bottom: 1rem;">📅</div>
                  <p>ไม่มีรายการแข่งขันในจังหวัดนี้</p>
                  <p style="color: #666; font-size: 0.9rem;">คลิกที่จังหวัดอื่นเพื่อดูรายการแข่งขัน</p>
                </div>
              `;
            }

            infoPanel.classList.add("show");
          });
        } else {
          // Non-province elements
          prov.style.fill = "#f0f0f0";
          prov.style.stroke = "#ddd";
          prov.style.strokeWidth = "0.5px";
          prov.style.pointerEvents = "none";
        }
      });
    });

    // Close sidebar when clicking outside
    document.addEventListener('click', (e) => {
      if (!infoPanel.contains(e.target) && 
          e.target.id !== 'thailand-map' && 
          !e.target.closest('path') && 
          !e.target.closest('g')) {
        if (infoPanel.classList.contains('show')) {
          infoPanel.classList.remove('show');
          header.textContent = "เลือกจังหวัดบนแผนที่ที่ต้องการทราบการแข่งขัน/ค่าย";
        }
      }
    });
  </script>
</body>

</html>
